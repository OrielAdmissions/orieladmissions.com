document.addEventListener("DOMContentLoaded",function(){s()});function s(){const o=document.querySelectorAll(".tag-filters button"),a=document.getElementById("posts-container"),i=document.getElementById("pagination-container");if(!o.length||!a)return;o.forEach(e=>{e.addEventListener("click",()=>{o.forEach(n=>n.classList.remove("active")),e.classList.add("active"),r({tag:e.getAttribute("data-tag")||"",paged:1})})}),document.addEventListener("click",function(e){var n;if(e.target.closest(".pagination a")){e.preventDefault();const t=e.target.getAttribute("href").split("paged=")[1]||1;r({tag:((n=document.querySelector(".tag-filters button.active"))==null?void 0:n.getAttribute("data-tag"))||"",paged:t})}});function r({tag:e,paged:n}){fetch(myAjax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"filter_posts_by_tag",security:myAjax.security,tag:e,paged:n})}).then(t=>t.json()).then(t=>{t.success?(console.log("✅ AJAX Response:",t),a.innerHTML=t.data.html,i.innerHTML=t.data.pagination):(console.error("❌ AJAX Error:",t.data.message),a.innerHTML=`<p>⚠️ ${t.data.message}</p>`)}).catch(t=>{console.error("❌ AJAX Request Failed:",t),a.innerHTML="<p>⚠️ Error loading posts. Try again.</p>"})}}
